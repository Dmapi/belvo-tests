(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8474:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var a=n(5893),s=n(7757),i=n.n(s),o=n(4699),l=n(2137),r=n(7329),c=n(5988),x=n(9008),u=n(7294),m=n(4223),d=n(6552),h=(n(3376),n(7675)),f=function(e){return fetch(e).then((function(e){return e.json()}))},p=function(e){return Math.round(e.reduce((function(e,t){return e+t}),0)/e.length)};function j(e){var t,n,s=(0,u.useState)(""),j=s[0],g=s[1],y=(0,u.useState)({taxStatus:null,taxComplianceStatus:null,invoices:[],taxReturns:null}),N=y[0],_=y[1],v=(0,u.useState)(!1),b=v[0],k=v[1],w=function(){var e=(0,l.Z)(i().mark((function e(t){var n,a,s,l,r,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,Promise.all([f("http://localhost:3000/api/tax-status?link=".concat(t)),f("http://localhost:3000/api/tax-compliance-status?link=".concat(t)),f("http://localhost:3000/api/invoices?link=".concat(t)),f("http://localhost:3000/api/tax-returns?link=".concat(t))]);case 3:n=e.sent,a=(0,o.Z)(n,4),s=a[0],l=a[1],r=a[2],c=a[3],_({taxStatus:s,taxComplianceStatus:l,invoices:r,taxReturns:c}),k(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=N.taxStatus,E=N.taxComplianceStatus,A=N.invoices,P=N.taxReturns,C=A&&A.filter((function(e){return"N\xf3mina"==e.invoice_type})).sort((function(e,t){return new Date(e.invoice_date)-new Date(t.invoice_date)})),F=P&&P.filter((function(e){return e.hasOwnProperty("sueldos_salarios")})).map((function(e){return e.informacion_general.ejercicio+e.servicios_profesionales.ingresos.total_ingresos}));return(0,a.jsxs)("div",{className:"jsx-3025447587 container",children:[(0,a.jsxs)(x.default,{children:[(0,a.jsx)("title",{className:"jsx-3025447587",children:"Fiscal guide"}),(0,a.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap",rel:"stylesheet",className:"jsx-3025447587"})]}),(0,a.jsxs)("main",{className:"jsx-3025447587",children:[(0,a.jsx)("h1",{className:"jsx-3025447587",children:" SAT report for individuals"}),(0,a.jsxs)("div",{styles:{textAlign:"center"},className:"jsx-3025447587 search",children:[(0,a.jsx)("input",{placeholder:"Please insert the Belvo link_id",value:j,onChange:function(e){return g(e.target.value)},type:"text",className:"jsx-3025447587"}),(0,a.jsx)("button",{onClick:function(){return w(j)},className:"jsx-3025447587",children:"Create report"})]}),b&&(0,a.jsx)(a.Fragment,{children:"...loading"}),S&&E&&A&&P&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"jsx-3025447587",children:" Step #1 - Get to know the company "}),(0,a.jsx)("h3",{className:"jsx-3025447587",children:" Taxpayer information"}),(0,a.jsxs)("ul",{className:"jsx-3025447587",children:[(0,a.jsxs)("li",{className:"jsx-3025447587",children:["Name: ",S.official_name]}),(0,a.jsxs)("li",{className:"jsx-3025447587",children:["Location: ",S.address.locality,", ",S.address.state]}),(0,a.jsxs)("li",{className:"jsx-3025447587",children:["Phone: ",S.tax_payer_information.phone]}),(0,a.jsxs)("li",{className:"jsx-3025447587",children:["Email: ",S.tax_payer_information.email]}),(0,a.jsxs)("li",{className:"jsx-3025447587",children:["Active taxpayer since: ",S.tax_payer_information.start_operations_date.substring(0,10)]}),(0,a.jsxs)("li",{className:"jsx-3025447587",children:["Economic activities: ",S.economic_activity.map((function(e){return e.economic_activity})).join(", ")]})]}),(0,a.jsx)("h3",{className:"jsx-3025447587",children:" Economic activites"}),(0,a.jsx)(d.PlotFigure,{className:"plot",options:{marginLeft:150,marks:[m.barX(S.economic_activity.map((function(e){return{activity:e.economic_activity,value:e.percentage}})),{x:"value",y:"activity",fill:"#4E79A7"})],x:{label:"Percentage of income"},y:{label:"Business activity"},marginBottom:40}}),(0,a.jsx)("h2",{className:"jsx-3025447587",children:"Step #2 - Indicators of fraud & non-compliance"}),(0,a.jsx)("h3",{className:"jsx-3025447587",children:"Tax compliance status"}),(0,a.jsx)("ul",{className:"jsx-3025447587",children:(0,a.jsx)("li",{className:"jsx-3025447587",children:(n=E.outcome,{NEGATIVE:"\u274c - Not complying to his tax obligations",NO_OBLIGATIONS:"\u2705 Has no obligations",POSITIVE:"\u2705 Complying to all tax obligations"}[n])})}),(0,a.jsx)("h2",{className:"jsx-3025447587",children:"Step #3 - Identify the risk profile of the client"}),(0,a.jsx)("h3",{className:"jsx-3025447587",children:"Historical payroll invoices"}),(0,a.jsxs)("ul",{className:"jsx-3025447587",children:[(0,a.jsxs)("li",{className:"jsx-3025447587",children:["Average monthly paycheck: MXN ",p(C.map((function(e){return e.total_amount})))]}),(0,a.jsxs)("li",{className:"jsx-3025447587",children:["Number of employers during period: ",(t=C.map((function(e){return e.sender_id})),(0,r.Z)(new Set(t))).length]})]}),(0,a.jsx)(d.PlotFigure,{className:"plot",options:{marks:[m.barY(C,m.groupX({y:"sum"},{x:function(e){return new Date(e.invoice_date)},y:"total_amount",thresholds:h.timeMonth,fill:"sender_id"})),m.frame()],x:{tickRotate:-30,tickFormat:function(e){return m.formatMonth()(e.getMonth())+" "+e.getFullYear()},label:"Month of the year"},y:{label:"Income"},grid:!0,marginBottom:75,marginLeft:100}}),(0,a.jsx)("h3",{className:"jsx-3025447587",children:"Yearly total earnings"}),(0,a.jsx)("ul",{className:"jsx-3025447587",children:(0,a.jsxs)("li",{className:"jsx-3025447587",children:["Average yearly total earnings: MXN ",p(F)]})}),(0,a.jsx)(d.PlotFigure,{className:"plot",options:{marks:[m.barY(P,m.groupX({y:"sum"},{x:function(e){return e.informacion_general.ejercicio},y:function(e){return e.sueldos_salarios.ingreso_anual+e.servicios_profesionales.ingresos.total_ingresos},fill:"#4E79A7"})),m.frame()],x:{tickRotate:-30,label:"Year"},y:{label:"Yearly income"},grid:!0,marginBottom:75,marginLeft:100}})]})]}),(0,a.jsx)(c.default,{id:"3776761162",children:[".shorten.jsx-3025447587{text-overflow:ellipsis;}",".container.jsx-3025447587{min-height:100vh;padding:0 19rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#8a9aa8;}","main.jsx-3025447587{width:800px;}","p.jsx-3025447587{line-height:28px font-weight:400;}","h1.jsx-3025447587,h2.jsx-3025447587{color:#161a1d;}","em.jsx-3025447587{font-family:monospace;color:#3882fa;font-style:initial;}",".search.jsx-3025447587{background-color:#f6ffed;border:1px solid #b7eb8f;padding:15px;}",'input.jsx-3025447587{font-family:"Noto Sans",Arial,Verdana;width:65%;}','button.jsx-3025447587{font-family:"Noto Sans",Arial,Verdana;width:25%;}',"pre.jsx-3025447587{margin:0;}"]}),(0,a.jsx)(c.default,{id:"1191650112",children:['html,body{font-family:"Noto Sans",Arial,Verdana;font-weight:400;color:#161a1d;}',"table,.plot{color:black;font-size:12px;}","table{border-color:grey;}","td{border:1px solid #eee;}"]})]})}},8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8474)}])}},function(e){e.O(0,[774,880,94,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);